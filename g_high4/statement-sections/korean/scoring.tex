제한:

\begin{itemize}
\item $1 \le R,C,N \le 200\,000$
\item $0 \le M \le 200\,000$
\item $1 \le x_i \le R$, $1 \le y_i \le C$
\item $1 \le v_i \le 1000$
\item $1 \le u_j \le d_j \le R$
\item $1 \le l_j \le r_j \le C$
\item 각 보물의 위치는 서로 다릅니다.
\item 위험 구역이 $(1, 1)$ 또는 $(R, C)$를 포함하지 않습니다.
\end{itemize}

서브태스크:

\begin{tabular}{|l|l|l|} \hline
  \textbf{번호} & \textbf{배점} & \textbf{제한} \\ \hline
  1 & 7 & $R \le 100$, $C \le 100$, $M \le 100$ \\ \hline
  2 & 9 & $R \le 1000$, $C \le 1000$ \\ \hline
  3 & 13 & $M=0$ \\ \hline
  4 & 29 & $M=1$ \\ \hline
  5 & 42 & 추가 제한 없음 \\ \hline
\end{tabular}